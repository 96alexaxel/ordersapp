<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–§–æ—Ä–º–∞ –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è GM</title>
    <!-- –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å–∫—Ä–∏–ø—Ç–∞ Telegram WebApp -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'Arial', 'sans-serif'], 
                    }
                }
            }
        }
    </script>

    <style>
        /* --- –ó–ú–Ü–ù–ù–Ü –ö–û–õ–¨–û–†–Ü–í --- */
        :root {
            /* –¢–µ–º–Ω–∞ —Ç–µ–º–∞ (Default) */
            --bg-body: #1c1c1e;
            --card-bg: #2c2c2e;
            --text-main: #ffffff;
            --text-muted: #9CA3AF;
            --accent: #FFC107;
            --accent-hover: #ffcf45;
            --border: #444444;
            --input-bg: #38383a;
            --success: #32D74B;
            --telegram: #2AABEE;
        }

        /* –°–≤—ñ—Ç–ª–∞ —Ç–µ–º–∞ */
        .light-theme {
            --bg-body: #F2F2F7;
            --card-bg: #FFFFFF;
            --text-main: #000000;
            --text-muted: #666666;
            --accent: #FFC107;
            --accent-hover: #ffdb68;
            --border: #C6C6C8;
            --input-bg: #E5E5EA;
            --success: #34C759;
        }
        
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            margin: 0;
            padding: 0; /* –ü—Ä–∏–±–∏—Ä–∞—î–º–æ –≤—ñ–¥—Å—Ç—É–ø–∏ –¥–ª—è Telegram Fullscreen */
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        /* --- –ö–û–ù–¢–ï–ô–ù–ï–† --- */
        .container {
            background-color: var(--card-bg);
            width: 100%;
            max-width: 100%; /* –ù–∞ –≤–µ—Å—å –µ–∫—Ä–∞–Ω –≤ —Ç–µ–ª–µ—Ñ–æ–Ω—ñ */
            min-height: 100vh; /* –ù–∞ –≤—Å—é –≤–∏—Å–æ—Ç—É */
            padding: 20px;
            padding-top: 30px;
            padding-bottom: 40px;
            border-radius: 0; /* –ü—Ä–∏–±–∏—Ä–∞—î–º–æ —Ä–∞–¥—ñ—É—Å –¥–ª—è —Ñ—É–ª—Å–∫—Ä—ñ–Ω—É */
            box-shadow: none;
            z-index: 10;
            position: relative;
        }
        
        /* –ù–∞ –ü–ö —Ä–æ–±–∏–º–æ –≥–∞—Ä–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ —Ü–µ–Ω—Ç—Ä—É */
        @media (min-width: 500px) {
            body { padding: 20px; }
            .container {
                max-width: 500px;
                min-height: auto;
                border-radius: 16px;
                box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            }
        }

        /* --- –ü–†–û–ì–†–ï–° –ë–ê–† --- */
        .progress-container {
            position: fixed; /* –§—ñ–∫—Å—É—î–º–æ –∑–≤–µ—Ä—Ö—É */
            top: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background-color: var(--input-bg);
            z-index: 50;
        }
        
        .progress-bar {
            height: 100%;
            width: 0%;
            background-color: var(--accent);
            transition: width 0.4s ease;
            box-shadow: 0 0 10px var(--accent);
        }

        /* --- –ü–ï–†–ï–ú–ò–ö–ê–ß –¢–ï–ú–ò --- */
        .theme-switch-wrapper {
            position: absolute;
            top: 15px;
            right: 15px;
            z-index: 20;
        }
        
        .theme-checkbox { display: none; }
        
        .theme-label {
            cursor: pointer;
            background-color: var(--input-bg);
            width: 50px;
            height: 26px;
            border-radius: 50px;
            position: relative;
            display: block;
            border: 1px solid var(--border);
        }
        
        .theme-label::after {
            content: 'üåô';
            font-size: 14px;
            position: absolute;
            top: 2px;
            left: 3px;
            width: 20px;
            height: 20px;
            background-color: var(--card-bg);
            border-radius: 50%;
            transition: 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .theme-checkbox:checked + .theme-label::after {
            left: 25px;
            content: '‚òÄÔ∏è';
            transform: translateX(0);
        }
        
        .theme-checkbox:checked + .theme-label {
            background-color: var(--accent);
        }

        /* --- –¢–ò–ü–û–ì–†–ê–§–Ü–ö–ê --- */
        h2 {
            text-align: center;
            color: var(--accent);
            margin-bottom: 25px;
            font-weight: 800;
            font-size: 1.5rem;
            border-bottom: 2px solid var(--accent);
            padding-bottom: 15px;
            line-height: 1.2;
            margin-top: 10px;
        }
        
        .form-group { margin-bottom: 18px; }
        
        label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        input[type="text"], input[type="number"], input[type="tel"], select, textarea {
            width: 100%;
            padding: 14px;
            background-color: var(--input-bg);
            border: 1px solid var(--border);
            border-radius: 10px;
            font-size: 16px;
            color: var(--text-main);
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(255, 193, 7, 0.3);
        }
        
        optgroup { font-weight: bold; color: var(--text-muted); background-color: var(--card-bg); }
        option { color: var(--text-main); padding: 5px; }

        hr {
            border: none;
            height: 1px;
            background-color: var(--border);
            margin: 25px 0;
            opacity: 0.5;
        }

        /* --- –†–ê–î–Ü–û –¢–ê –ß–ï–ö–ë–û–ö–°–ò --- */
        .radio-group, .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
            margin-top: 10px;
        }
        
        .radio-group label, .checkbox-group label {
            font-weight: normal;
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 0;
            cursor: pointer;
            color: var(--text-main);
            font-size: 0.95rem;
            padding: 5px 0;
        }

        input[type="radio"], input[type="checkbox"] {
            -webkit-appearance: none;
            appearance: none;
            width: 22px;
            height: 22px;
            border: 2px solid var(--border);
            background-color: var(--input-bg);
            border-radius: 6px;
            position: relative;
            cursor: pointer;
            flex-shrink: 0;
        }

        input[type="radio"] { border-radius: 50%; }

        input[type="checkbox"]:checked, input[type="radio"]:checked {
            background-color: var(--accent);
            border-color: var(--accent);
        }

        input[type="checkbox"]:checked:after {
            content: '‚úì';
            font-size: 16px;
            color: #1c1c1e;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: 900;
        }

        input[type="radio"]:checked:after {
            content: '';
            width: 10px;
            height: 10px;
            background: #1c1c1e;
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        /* --- –ö–ù–û–ü–ö–ò --- */
        .btn {
            width: 100%;
            padding: 16px;
            background-color: var(--accent);
            color: #1c1c1e;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: transform 0.1s, background-color 0.2s;
            margin-top: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn:active { transform: scale(0.98); }
        .btn:hover { background-color: var(--accent-hover); }
        
        .btn-secondary {
            background-color: var(--border);
            color: var(--text-main);
            text-transform: none;
            font-weight: 600;
            font-size: 1rem;
        }
        
        .btn-secondary:hover { background-color: #555555; }
        .light-theme .btn-secondary:hover { background-color: #999; }

        /* –ö–Ω–æ–ø–∫–∞ Telegram */
        .btn-telegram {
            background-color: var(--telegram);
            color: #ffffff;
            margin-top: 10px;
        }
        .btn-telegram:hover {
            background-color: #1c92d2;
        }

        /* --- –î–û–î–ê–í–ê–ù–ù–Ø –¢–û–í–ê–†–Ü–í --- */
        .product-adder {
            background: rgba(125, 125, 125, 0.05);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        #added-products-list {
            list-style: none;
            padding: 0;
            margin-top: 15px;
        }

        #added-products-list li {
            padding: 12px;
            margin-bottom: 8px;
            background-color: var(--input-bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.95rem;
            color: var(--text-main);
        }
        
        .remove-item {
            color: #ff6666;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.5rem;
            padding: 0 10px;
            line-height: 1;
        }
        
        /* --- –†–ï–ó–£–õ–¨–¢–ê–¢ --- */
        #result-area {
            display: none;
            margin-top: 30px;
            padding: 20px;
            background-color: var(--input-bg);
            border-top: 5px solid var(--accent);
            border-radius: 12px;
        }

        #final-text {
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            color: var(--text-main);
            background-color: var(--card-bg);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--border);
            overflow-x: auto;
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–∞ —Å—ñ—Ç–∫–∞ –∞–¥—Ä–µ—Å–∏ */
        .address-grid {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        @media (min-width: 500px) {
            .address-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
            }
            .address-grid > .form-group:last-child {
                grid-column: 1 / -1;
            }
        }
        
        /* --- –ê–ù–Ü–ú–ê–¶–Ü–Ø –§–ï–Ñ–†–í–ï–†–ö–Ü–í --- */
        #celebration-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(28, 28, 30, 0.95);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            overflow: hidden;
        }
        #celebration-overlay.visible {
            opacity: 1;
            pointer-events: all;
        }
        #fireworks-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }
        .celebration-content {
            position: relative;
            z-index: 10;
            text-align: center;
            padding: 20px;
        }
        .salute-text {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--accent);
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(255, 193, 7, 0.5);
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes popIn {
            0% { opacity: 0; transform: scale(0.5); }
            100% { opacity: 1; transform: scale(1); }
        }
        
        #status-message {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 400px;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            z-index: 10000;
            display: none;
        }
    </style>
</head>
<body>

<div id="status-message"></div>

<div id="celebration-overlay">
    <canvas id="fireworks-canvas"></canvas>
    <div class="celebration-content">
        <div id="celebration-text" class="salute-text"></div>
    </div>
</div>

<!-- –ü—Ä–æ–≥—Ä–µ—Å –±–∞—Ä —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–π –∑–≤–µ—Ä—Ö—É -->
<div class="progress-container">
    <div class="progress-bar" id="progress-bar"></div>
</div>

<div class="container">
    
    <!-- –ü–µ—Ä–µ–º–∏–∫–∞—á —Ç–µ–º–∏ -->
    <div class="theme-switch-wrapper">
        <input type="checkbox" class="theme-checkbox" id="theme-toggle">
        <label class="theme-label" for="theme-toggle"></label>
    </div>
    
    <div id="order-form">
        <h2>
            –§–æ—Ä–º—É–≤–∞–Ω–Ω—è –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è (GM)
        </h2>
        
        <div class="form-group p-4 bg-[rgba(125,125,125,0.05)] rounded-xl border border-border">
            <label class="flex items-center cursor-pointer text-base font-bold mb-0" style="color: var(--text-main);">
                <input type="checkbox" id="is-preorder" class="mr-3"> ‚ùóÔ∏è –¶–µ –ü–µ—Ä–µ–¥–∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
            </label>
        </div>
        
        <hr>
        
        <div class="space-y-4">
            <div class="form-group">
                <label for="manager">–û–±–µ—Ä—ñ—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞:</label>
                <select id="manager" onchange="updateProgress()">
                    <option value="" disabled selected>-- –ù–µ –æ–±—Ä–∞–Ω–æ --</option>
                    <option value="–û–ª–µ–∫—Å–∞–Ω–¥—Ä–∞ –ù–∞–º—ñ—Å—Ç–Ω–∏–∫–∞">–û–ª–µ–∫—Å–∞–Ω–¥—Ä –ù–∞–º—ñ—Å—Ç–Ω–∏–∫</option>
                    <option value="–ê–Ω–¥—Ä—ñ—è –ü–∞—à–∏–∫–∞">–ê–Ω–¥—Ä—ñ–π –ü–∞—à–∏–∫</option>
                    <option value="–°–µ—Ä–≥—ñ—è –Ü–≤–∞–Ω—á–µ–Ω–∫–æ">–°–µ—Ä–≥—ñ–π –Ü–≤–∞–Ω—á–µ–Ω–∫–æ</option>
                    <option value="–û–ª–µ–∫—Å–∞–Ω–¥—Ä–∞ –î–µ–Ω–∏—Å–æ–≤–∞">–û–ª–µ–∫—Å–∞–Ω–¥—Ä –î–µ–Ω–∏—Å–æ–≤</option>
                    <option value="–ê–Ω–¥—Ä—ñ—è –ß–æ—Ä–Ω–æ–≥–æ">–ê–Ω–¥—Ä—ñ–π –ß–æ—Ä–Ω–∏–π</option>
                    <option value="–ê—Ä—Ç—É—Ä–∞ –ï–≤—Ç—É—à–µ–Ω–∫–∞">–ê—Ä—Ç—É—Ä –ï–≤—Ç—É—à–µ–Ω–∫–æ</option>
                </select>
            </div>
        </div>

        <hr>

        <div class="product-adder space-y-4">
            <div class="form-group !mb-0">
                <label for="product-select">–û–±–µ—Ä—ñ—Ç—å –ø–æ–∑–∏—Ü—ñ—é:</label>
                <select id="product-select">
                    <option value="" disabled selected>-- –û–±–µ—Ä—ñ—Ç—å –∑—ñ —Å–ø–∏—Å–∫—É --</option>
                    
                    <optgroup label="–§—Ä–æ–Ω—Ç–∞–ª—å–Ω—ñ –Ω–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—á—ñ">
                        <option>–®–≤–∏–¥–∫–æ–∑‚Äô—î–º–Ω–∏–π —Ñ—Ä–æ–Ω—Ç–∞–ª—å–Ω–∏–π –Ω–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—á General-–•</option>
                        <option>–®–≤–∏–¥–∫–æ–∑‚Äô—î–º–Ω–∏–π —Ñ—Ä–æ–Ω—Ç–∞–ª—å–Ω–∏–π –Ω–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—á General-–•L</option>
                        <option>–®–≤–∏–¥–∫–æ–∑‚Äô—î–º–Ω–∏–π —Ñ—Ä–æ–Ω—Ç–∞–ª—å–Ω–∏–π –Ω–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—á General- EURO</option>
                        <option>–®–≤–∏–¥–∫–æ–∑‚Äô—î–º–Ω–∏–π —Ñ—Ä–æ–Ω—Ç–∞–ª—å–Ω–∏–π –Ω–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—á General- –• 3-—Ö —Å–µ–∫—Ü—ñ–π–Ω–∏–π</option>
                        <option>–®–≤–∏–¥–∫–æ–∑‚Äô—î–º–Ω–∏–π —Ñ—Ä–æ–Ω—Ç–∞–ª—å–Ω–∏–π –Ω–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—á General- –•L 3-—Ö —Å–µ–∫—Ü—ñ–π–Ω–∏–π</option>
                        <option>–®–≤–∏–¥–∫–æ–∑‚Äô—î–º–Ω–∏–π —Ñ—Ä–æ–Ω—Ç–∞–ª—å–Ω–∏–π –Ω–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—á General- EURO 3-—Ö —Å–µ–∫—Ü—ñ–π–Ω–∏–π</option>
                    </optgroup>

                    <optgroup label="–ö–µ—Ä—É–≤–∞–Ω–Ω—è –≥—ñ–¥—Ä–∞–≤–ª—ñ–∫–æ—é">
                        <option>–ö–æ–º–ø–ª–µ–∫—Ç –∫–µ—Ä—É–≤–∞–Ω–Ω—è –≥—ñ–¥—Ä–∞–≤–ª—ñ–∫–æ—é –Ω–∞ –¥–≤—ñ —Å–µ–∫—Ü—ñ—ó</option>
                        <option>–ö–æ–º–ø–ª–µ–∫—Ç –∫–µ—Ä—É–≤–∞–Ω–Ω—è –≥—ñ–¥—Ä–∞–≤–ª—ñ–∫–æ—é –Ω–∞ —Ç—Ä–∏ —Å–µ–∫—Ü—ñ—ó</option>
                    </optgroup>

                    <optgroup label="–ö–æ–≤—à—ñ">
                        <option>–ö—ñ–≤—à 1,8 –º</option>
                        <option>–ö—ñ–≤—à 2 –º</option>
                        <option>–ö—ñ–≤—à 2,2 –º</option>
                        <option>–ö—ñ–≤—à 2,4 –º</option>
                        <option>–ö—ñ–≤—à –±—É–¥—ñ–≤–µ–ª—å–Ω–∏–π 1,6 –º</option>
                        <option>–ö—ñ–≤—à –∑ –∑–∞—Ö–≤–∞—Ç–æ–º</option>
                        <option>–ö—ñ–≤—à –≤–∏—Å–æ–∫–æ–≥–æ –≤–∏—Å–∏–ø—É</option>
                        <option>–ö—ñ–≤—à —â–µ–ª–µ–ø–Ω–∏–π 1.8 –º</option>
                        <option>–ö—ñ–≤—à —â–µ–ª–µ–ø–Ω–∏–π 2 –º</option>
                        <option>–ö—ñ–≤—à –¥–ª—è –±—ñ–≥ - –±–µ–≥—ñ–≤</option>
                        <option>–ó–±—ñ–ª—å—à–µ–Ω–∏–π –ö—ñ–≤—à –Ω–∞ 1.5–º3</option>
                    </optgroup>

                    <optgroup label="–í–∏–ª–∞ —Ç–∞ –ó–∞—Ö–≤–∞—Ç–∏">
                        <option>–í–∏–ª–∞ –¥–ª—è –ø—ñ–¥–¥–æ–Ω—ñ–≤</option>
                        <option>–ì–∞–∫ –¥–ª—è –±—ñ–≥ - –±–µ–≥—ñ–≤</option>
                        <option>–í–∏–ª–∞- –≥–∞–∫ 2 –≤ 1</option>
                        <option>–í–∏–ª–∞- –≥–∞–∫ 3 –≤ 1</option>
                        <option>–ó–∞—Ö–≤–∞—Ç –¥–ª—è —Ç—é–∫—ñ–≤</option>
                        <option>–í–∏–ª–∞ —Å—ñ–Ω–∞–∂–Ω—ñ General</option>
                        <option>–í–∏–ª–∞ –¥–ª—è —Ç—é–∫—ñ–≤ General</option>
                        <option>–ó–∞—Ö–≤–∞—Ç –¥–ª—è –∫–æ–ª–æ–¥ General</option>
                    </optgroup>

                    <optgroup label="–í—ñ–¥–≤–∞–ª–∏">
                        <option>–í—ñ–¥–≤–∞–ª –≥—ñ–¥—Ä–æ–ø–æ–≤–æ—Ä–æ—Ç–Ω–∏–π –¥–≤–æ—Å—Ç–æ—Ä–æ–Ω–Ω—ñ–π</option>
                        <option>–í—ñ–¥–≤–∞–ª –≥—Ä–µ–π–¥–µ—Ä–Ω–∏–π</option>
                        <option>–í—ñ–¥–≤–∞–ª –¥–ª—è –±—É—Ä—Ç—É–≤–∞–Ω–Ω—è –∑–µ—Ä–Ω–∞</option>
                        <option>–í—ñ–¥–≤–∞–ª —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π –¥–≤–æ—Å—Ç–æ—Ä–æ–Ω–Ω—ñ–π</option>
                        <option>–í—ñ–¥–≤–∞–ª —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π (–¥–≤–æ—Å—Ç–æ—Ä–æ–Ω–Ω—ñ–π) –≥—ñ–¥—Ä–æ–ø–æ–≤–æ—Ä–æ—Ç–Ω–∏–π EURO</option>
                    </optgroup>

                    <optgroup label="–ú–∞–Ω—ñ–ø—É–ª—è—Ç–æ—Ä–∏">
                        <option>–ö—Ä–∞–Ω-–º–∞–Ω—ñ–ø—É–ª—è—Ç–æ—Ä GENERAL CRANE Mini</option>
                        <option>–ö—Ä–∞–Ω-–º–∞–Ω—ñ–ø—É–ª—è—Ç–æ—Ä –ø–æ–≤–æ—Ä–æ—Ç–Ω–∏–π General SL-2000</option>
                    </optgroup>

                    <optgroup label="–ö—É–ª—å—Ç–∏–≤–∞—Ç–æ—Ä–∏">
                        <option>–ö—É–ª—å—Ç–∏–≤–∞—Ç–æ—Ä –ö–ù–° 3.0 DV</option>
                        <option>–ö—É–ª—å—Ç–∏–≤–∞—Ç–æ—Ä –ö–ù–° 3.5 DV</option>
                        <option>–ö—É–ª—å—Ç–∏–≤–∞—Ç–æ—Ä –ö–ù–° 4.0 DV</option>
                        <option>–ö—É–ª—å—Ç–∏–≤–∞—Ç–æ—Ä –ö–ù–° 3.0 S</option>
                        <option>–ö—É–ª—å—Ç–∏–≤–∞—Ç–æ—Ä –ö–ù–° 3.5 S</option>
                        <option>–ö—É–ª—å—Ç–∏–≤–∞—Ç–æ—Ä –ö–ù–° 4.0 S</option>
                        <option>–ö—É–ª—å—Ç–∏–≤–∞—Ç–æ—Ä –ö–ü–° 4.0 S</option>
                        <option>–ö—É–ª—å—Ç–∏–≤–∞—Ç–æ—Ä –ö–ü–° 4.0 DV</option>
                        <option>–ö—É–ª—å—Ç–∏–≤–∞—Ç–æ—Ä –ö–ü–†–° 5.0 S</option>
                        <option>–ö—É–ª—å—Ç–∏–≤–∞—Ç–æ—Ä –ö–ü–†–° 5.0 DV</option>
                        <option>–ö—É–ª—å—Ç–∏–≤–∞—Ç–æ—Ä –ö–ü–†–° 6.0 S</option>
                        <option>–ö—É–ª—å—Ç–∏–≤–∞—Ç–æ—Ä –ö–ü–†–° 6.0 DV</option>
                        <option>–ö—É–ª—å—Ç–∏–≤–∞—Ç–æ—Ä –ö–ü–†–° 8.0 S</option>
                        <option>–ö—É–ª—å—Ç–∏–≤–∞—Ç–æ—Ä –ö–ü–†–° 8.0 DV</option>
                        <option>–ö—É–ª—å—Ç–∏–≤–∞—Ç–æ—Ä –ö–†–ù 5.6 –º—ñ–∂—Ä—è–¥–Ω–∏–π (—Å—É—Ü—ñ–ª—å–Ω–∞ —Ä–∞–º–∞)</option>
                        <option>–ö—É–ª—å—Ç–∏–≤–∞—Ç–æ—Ä –ö–†–ù 5.6 –º—ñ–∂—Ä—è–¥–Ω–∏–π —Ä–æ–∑–∫–ª–∞–¥–Ω–∏–π</option>
                        <option>–ö—É–ª—å—Ç–∏–≤–∞—Ç–æ—Ä –ö–†–ù 4.2 –º—ñ–∂—Ä—è–¥–Ω–∏–π (—Å—É—Ü—ñ–ª—å–Ω–∞ —Ä–∞–º–∞)</option>
                        <option>–ö—É–ª—å—Ç–∏–≤–∞—Ç–æ—Ä –ö–†–ù 4.2 –º—ñ–∂—Ä—è–¥–Ω–∏–π —Ä–æ–∑–∫–ª–∞–¥–Ω–∏–π</option>
                    </optgroup>

                    <optgroup label="–ë–æ—Ä–æ–Ω–∏ —Ç–∞ –Ü–Ω—à–µ">
                        <option>–ë–æ—Ä–æ–Ω–∞ –ø—Ä—É–∂–∏–Ω–Ω–∞ –∑ –ø–ª–∞–≤–∞—é—á–∏–º–∏ —Å–µ–∫—Ü—ñ—è–º–∏</option>
                        <option>–ë–æ—Ä–æ–Ω–∞ –ø—Ä—É–∂–∏–Ω–Ω–∞ 9 –º</option>
                        <option>–ë–æ—Ä–æ–Ω–∞ –ø—Ä—É–∂–∏–Ω–Ω–∞ 15 –º</option>
                        <option>–õ—É—â–∏–ª—å–Ω–∏–∫ –Ω–∞–≤—ñ—Å–Ω–∏–π 2,6 –º</option>
                        <option>–õ—É—â–∏–ª—å–Ω–∏–∫ –Ω–∞–≤—ñ—Å–Ω–∏–π 3,2 –º</option>
                        <option>–õ—É—â–∏–ª—å–Ω–∏–∫ –ø—Ä–∏—á—ñ–ø–Ω–∏–π 3,2 –º</option>
                        <option>–õ—É—â–∏–ª—å–Ω–∏–∫ –ø—Ä–∏—á—ñ–ø–Ω–∏–π 2,6 –º</option>
                        <option>–õ—É—â–∏–ª—å–Ω–∏–∫ –ø—Ä–∏—á—ñ–ø–Ω–∏–π 4,2 –º</option>
                        <option>–õ—É—â–∏–ª—å–Ω–∏–∫ –ø—Ä–∏—á—ñ–ø–Ω–∏–π 5,0 –º</option>
                        <option>–ë–æ—Ä–æ–Ω–∞ –¥–∏—Å–∫–æ–≤–∞ —Ç—è–∂–∫–∞ 6,0 –º</option>
                        <option>–ü—Ä–∏—Å—Ç—Ä—ñ–π –¥–ª—è –≤–Ω–µ—Å–µ–Ω–Ω—è —Ä—ñ–¥–∫–∏—Ö –¥–æ–±—Ä–∏–≤</option>
                    </optgroup>
                </select>
            </div>
            
            <div class="form-group !mb-0 pt-3">
                <label for="item-comment">–ö–æ–º–µ–Ω—Ç–∞—Ä –¥–æ —Ü—ñ—î—ó –ø–æ–∑–∏—Ü—ñ—ó (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ):</label>
                <input type="text" id="item-comment" placeholder="–Ω–∞–ø—Ä. –≤—É—Ö–∞ —Ç–∞ –∫—Ä—é—á–∫–∏ –Ω–µ –ø—Ä–∏–≤–∞—Ä—é–≤–∞—Ç–∏">
            </div>

            <button type="button" class="btn btn-secondary" onclick="addItem()">+ –î–æ–¥–∞—Ç–∏ –ø–æ–∑–∏—Ü—ñ—é</button>
            
            <ul id="added-products-list"></ul>
        </div>

        <hr>

        <div class="space-y-4">
            <div class="form-group">
                <label for="recipient-company">–û—Ç—Ä–∏–º—É–≤–∞—á (–ù–∞–∑–≤–∞ —Ñ—ñ—Ä–º–∏/–≥–æ—Å–ø–æ–¥–∞—Ä—Å—Ç–≤–∞):</label>
                <input type="text" id="recipient-company" placeholder="–Ω–∞–ø—Ä. –ö-–°–ª–∞–≤—ñ–∫ —ñ –ö" oninput="updateProgress()">
            </div>

            <div class="form-group">
                <label>–°—É–º–∞ —Ç–∞ –ü–î–í:</label>
                <input type="number" id="amount" placeholder="–Ω–∞–ø—Ä. 338 000" inputmode="numeric" oninput="updateProgress()">
                
                <label for="prepayment-details" class="block mt-4">–î–µ—Ç–∞–ª—ñ –ø–µ—Ä–µ–¥–ø–ª–∞—Ç–∏ (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ):</label>
                <input type="text" id="prepayment-details" placeholder="–Ω–∞–ø—Ä. 5000 –≥—Ä–Ω –ø–µ—Ä–µ–¥–ø–ª–∞—Ç–∞...">
                
                <div class="radio-group">
                    <label>
                        <input type="radio" name="vat" value="–ü–î–í" checked> –ó –ü–î–í
                    </label>
                    <label>
                        <input type="radio" name="vat" value="–ë–µ–∑ –ü–î–í"> –ë–µ–∑ –ü–î–í
                    </label>
                    <label>
                        <input type="radio" name="vat" value="–ì–æ—Ç—ñ–≤–∫–∞"> –ì–æ—Ç—ñ–≤–∫–∞
                    </label>
                </div>
            </div>
        </div>

        <hr>

        <div class="form-group">
            <label>–ê–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏:</label>
            <div class="address-grid">
                <div class="form-group !mb-0">
                    <label for="delivery-oblast">–û–±–ª–∞—Å—Ç—å:</label>
                    <select id="delivery-oblast" onchange="populateRaions(); updateProgress()">
                        <option value="" disabled selected>–û–±–µ—Ä—ñ—Ç—å –æ–±–ª–∞—Å—Ç—å</option>
                    </select>
                </div>
                
                <div class="form-group !mb-0">
                    <label for="delivery-raion">–†–∞–π–æ–Ω:</label>
                    <select id="delivery-raion" disabled>
                        <option value="" disabled selected>–°–ø–æ—á–∞—Ç–∫—É –æ–±–µ—Ä—ñ—Ç—å –æ–±–ª–∞—Å—Ç—å</option>
                    </select>
                </div>
                
                <div class="form-group !mb-0">
                    <label for="delivery-village">–°–µ–ª–æ / –ù–∞—Å–µ–ª–µ–Ω–∏–π –ø—É–Ω–∫—Ç:</label>
                    <input type="text" id="delivery-village" placeholder="–Ω–∞–ø—Ä. –°–µ–ª–æ –ì–æ—Ä–æ–¥–∏—â–µ">
                </div>
            </div>
        </div>
        
        <div class="form-group">
            <label for="delivery-cost">–í–∞—Ä—Ç—ñ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ (—Ç–µ–∫—Å—Ç–æ–º):</label>
            <input type="text" id="delivery-cost" placeholder="–Ω–∞–ø—Ä. 10'000–≥—Ä–Ω">
            <div class="checkbox-group">
                <label>
                    <input type="checkbox" id="delivery-included"> –î–æ—Å—Ç–∞–≤–∫–∞ –≤—Ä–∞—Ö–æ–≤–∞–Ω–∞
                </label>
            </div>
        </div>

        <hr>
        
        <div class="space-y-4">
            <div class="form-group">
                <label for="contact-name">–ü–Ü–ë –û—Ç—Ä–∏–º—É–≤–∞—á–∞:</label>
                <input type="text" id="contact-name" placeholder="–Ω–∞–ø—Ä. –ö–∏—Ä–Ω–∞—Å—ñ–≤—Å—å–∫–∏–π –û–ª–µ–∫—Å–∞–Ω–¥—Ä">
            </div>

            <div class="form-group">
                <label for="phone">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É:</label>
                <input type="tel" id="phone" placeholder="–Ω–∞–ø—Ä. 0989218673" oninput="updateProgress()">
            </div>

            <div class="form-group">
                <label for="tractor">–¢—Ä–∞–∫—Ç–æ—Ä (–º–æ–¥–µ–ª—å):</label>
                <input type="text" id="tractor" placeholder="–Ω–∞–ø—Ä. –ú–¢–ó 892">
            </div>

            <div class="form-group">
                <label for="additional-info">–î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è:</label>
                <textarea id="additional-info" rows="3" placeholder="–Ω–∞–ø—Ä. –í–µ–∑–µ–º–æ –Ω–∞ –ø–æ—á–∞—Ç–∫—É —Å—ñ—á–Ω—è..."></textarea>
            </div>
        </div>
        
        <hr>

        <button type="button" class="btn" onclick="generateOrder()">–°—Ñ–æ—Ä–º—É–≤–∞—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>

        <div id="result-area">
            <h3 class="text-xl font-semibold mt-0 mb-3" style="color: var(--accent);">–ì–æ—Ç–æ–≤–∏–π —Ç–µ–∫—Å—Ç:</h3>
            <div id="final-text"></div>
            
            <button type="button" class="btn btn-secondary" onclick="copyText()">
                –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ —Ç–µ–∫—Å—Ç
            </button>

            <!-- –ö–ù–û–ü–ö–ê TELEGRAM -->
            <button type="button" class="btn btn-telegram" onclick="shareTelegram()">
                <span class="mr-2">‚úàÔ∏è</span> –í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –≤ Telegram
            </button>
        </div>

    </div>

</div>

<script>
    // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è Telegram WebApp
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.expand(); // –†–æ–∑–≥–æ—Ä—Ç–∞—î–º–æ –Ω–∞ –≤–µ—Å—å –µ–∫—Ä–∞–Ω
    
    // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ —Ç–µ–º—É –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å Telegram, —è–∫—â–æ –≤–æ–Ω–∏ —î
    // (–ê–ª–µ –Ω–∞—à —Ç—É–º–±–ª–µ—Ä –º–∞—î –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞)

    let addedItems = [];
    const statusMessageEl = document.getElementById('status-message');
    let lastFormattedAmount = '0'; 
    let fireworksInterval;
    
    const ukrRegions = {
        "–í—ñ–Ω–Ω–∏—Ü—å–∫–∞ –æ–±–ª–∞—Å—Ç—å": ["–í—ñ–Ω–Ω–∏—Ü—å–∫–∏–π", "–ì–∞–π—Å–∏–Ω—Å—å–∫–∏–π", "–ñ–º–µ—Ä–∏–Ω—Å—å–∫–∏–π", "–ú–æ–≥–∏–ª—ñ–≤-–ü–æ–¥—ñ–ª—å—Å—å–∫–∏–π", "–¢—É–ª—å—á–∏–Ω—Å—å–∫–∏–π", "–•–º—ñ–ª—å–Ω–∏—Ü—å–∫–∏–π"],
        "–í–æ–ª–∏–Ω—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å": ["–í–æ–ª–æ–¥–∏–º–∏—Ä—Å—å–∫–∏–π", "–ö–∞–º—ñ–Ω—å-–ö–∞—à–∏—Ä—Å—å–∫–∏–π", "–ö–æ–≤–µ–ª—å—Å—å–∫–∏–π", "–õ—É—Ü—å–∫–∏–π"],
        "–î–Ω—ñ–ø—Ä–æ–ø–µ—Ç—Ä–æ–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å": ["–î–Ω—ñ–ø—Ä–æ–≤—Å—å–∫–∏–π", "–ö–∞–º'—è–Ω—Å—å–∫–∏–π", "–ö—Ä–∏–≤–æ—Ä—ñ–∑—å–∫–∏–π", "–ù—ñ–∫–æ–ø–æ–ª—å—Å—å–∫–∏–π", "–ù–æ–≤–æ–º–æ—Å–∫–æ–≤—Å—å–∫–∏–π", "–ü–∞–≤–ª–æ–≥—Ä–∞–¥—Å—å–∫–∏–π", "–°–∏–Ω–µ–ª—å–Ω–∏–∫—ñ–≤—Å—å–∫–∏–π"],
        "–î–æ–Ω–µ—Ü—å–∫–∞ –æ–±–ª–∞—Å—Ç—å": ["–ë–∞—Ö–º—É—Ç—Å—å–∫–∏–π", "–í–æ–ª–Ω–æ–≤–∞—Å—å–∫–∏–π", "–ì–æ—Ä–ª—ñ–≤—Å—å–∫–∏–π", "–î–æ–Ω–µ—Ü—å–∫–∏–π", "–ö–∞–ª—å–º—ñ—É—Å—å–∫–∏–π", "–ö—Ä–∞–º–∞—Ç–æ—Ä—Å—å–∫–∏–π", "–ú–∞—Ä—ñ—É–ø–æ–ª—å—Å—å–∫–∏–π", "–ü–æ–∫—Ä–æ–≤—Å—å–∫–∏–π"],
        "–ñ–∏—Ç–æ–º–∏—Ä—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å": ["–ë–µ—Ä–¥–∏—á—ñ–≤—Å—å–∫–∏–π", "–ñ–∏—Ç–æ–º–∏—Ä—Å—å–∫–∏–π", "–ö–æ—Ä–æ—Å—Ç–µ–Ω—Å—å–∫–∏–π", "–ù–æ–≤–æ–≥—Ä–∞–¥-–í–æ–ª–∏–Ω—Å—å–∫–∏–π"],
        "–ó–∞–∫–∞—Ä–ø–∞—Ç—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å": ["–ë–µ—Ä–µ–≥—ñ–≤—Å—å–∫–∏–π", "–ú—É–∫–∞—á—ñ–≤—Å—å–∫–∏–π", "–†–∞—Ö—ñ–≤—Å—å–∫–∏–π", "–¢—è—á—ñ–≤—Å—å–∫–∏–π", "–£–∂–≥–æ—Ä–æ–¥—Å—å–∫–∏–π", "–•—É—Å—Ç—Å—å–∫–∏–π"],
        "–ó–∞–ø–æ—Ä—ñ–∑—å–∫–∞ –æ–±–ª–∞—Å—Ç—å": ["–ë–µ—Ä–¥—è–Ω—Å—å–∫–∏–π", "–í–∞—Å–∏–ª—ñ–≤—Å—å–∫–∏–π", "–ó–∞–ø–æ—Ä—ñ–∑—å–∫–∏–π", "–ú–µ–ª—ñ—Ç–æ–ø–æ–ª—å—Å—å–∫–∏–π", "–ü–æ–ª–æ–≥—ñ–≤—Å—å–∫–∏–π"],
        "–Ü–≤–∞–Ω–æ-–§—Ä–∞–Ω–∫—ñ–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å": ["–Ü–≤–∞–Ω–æ-–§—Ä–∞–Ω–∫—ñ–≤—Å—å–∫–∏–π", "–ö–∞–ª—É—Å—å–∫–∏–π", "–ö–æ–ª–æ–º–∏–π—Å—å–∫–∏–π", "–ö–æ—Å—ñ–≤—Å—å–∫–∏–π", "–ù–∞–¥–≤—ñ—Ä–Ω—è–Ω—Å—å–∫–∏–π", "–í–µ—Ä—Ö–æ–≤–∏–Ω—Å—å–∫–∏–π"],
        "–ö–∏—ó–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å": ["–ë—ñ–ª–æ—Ü–µ—Ä–∫—ñ–≤—Å—å–∫–∏–π", "–ë–æ—Ä–∏—Å–ø—ñ–ª—å—Å—å–∫–∏–π", "–ë—Ä–æ–≤–∞—Ä—Å—å–∫–∏–π", "–ë—É—á–∞–Ω—Å—å–∫–∏–π", "–í–∏—à–≥–æ—Ä–æ–¥—Å—å–∫–∏–π", "–û–±—É—Ö—ñ–≤—Å—å–∫–∏–π", "–§–∞—Å—Ç—ñ–≤—Å—å–∫–∏–π"],
        "–ö—ñ—Ä–æ–≤–æ–≥—Ä–∞–¥—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å": ["–ì–æ–ª–æ–≤–∞–Ω—ñ–≤—Å—å–∫–∏–π", "–ö—Ä–æ–ø–∏–≤–Ω–∏—Ü—å–∫–∏–π", "–ù–æ–≤–æ—É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π", "–û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–π—Å—å–∫–∏–π"],
        "–ú–∏–∫–æ–ª–∞—ó–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å": ["–ë–∞—à—Ç–∞–Ω—Å—å–∫–∏–π", "–í–æ–∑–Ω–µ—Å–µ–Ω—Å—å–∫–∏–π", "–ú–∏–∫–æ–ª–∞—ó–≤—Å—å–∫–∏–π", "–ü–µ—Ä–≤–æ–º–∞–π—Å—å–∫–∏–π"],
        "–û–¥–µ—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å": ["–ë–µ—Ä–µ–∑—ñ–≤—Å—å–∫–∏–π", "–ë—ñ–ª–≥–æ—Ä–æ–¥-–î–Ω—ñ—Å—Ç—Ä–æ–≤—Å—å–∫–∏–π", "–ë–æ–ª–≥—Ä–∞–¥—Å—å–∫–∏–π", "–Ü–∑–º–∞—ó–ª—å—Å—å–∫–∏–π", "–û–¥–µ—Å—å–∫–∏–π", "–ü–æ–¥—ñ–ª—å—Å—å–∫–∏–π", "–†–æ–∑–¥—ñ–ª—å–Ω—è–Ω—Å—å–∫–∏–π"],
        "–ü–æ–ª—Ç–∞–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å": ["–ö—Ä–µ–º–µ–Ω—á—É—Ü—å–∫–∏–π", "–õ—É–±–µ–Ω—Å—å–∫–∏–π", "–ú–∏—Ä–≥–æ—Ä–æ–¥—Å—å–∫–∏–π", "–ü–æ–ª—Ç–∞–≤—Å—å–∫–∏–π"],
        "–†—ñ–≤–Ω–µ–Ω—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å": ["–í–∞—Ä–∞—Å—å–∫–∏–π", "–î—É–±–µ–Ω—Å—å–∫–∏–π", "–†—ñ–≤–Ω–µ–Ω—Å—å–∫–∏–π", "–°–∞—Ä–Ω–µ–Ω—Å—å–∫–∏–π"],
        "–°—É–º—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å": ["–ö–æ–Ω–æ—Ç–æ–ø—Å—å–∫–∏–π", "–û—Ö—Ç–∏—Ä—Å—å–∫–∏–π", "–†–æ–º–µ–Ω—Å—å–∫–∏–π", "–°—É–º—Å—å–∫–∏–π", "–®–æ—Å—Ç–∫–∏–Ω—Å—å–∫–∏–π"],
        "–¢–µ—Ä–Ω–æ–ø—ñ–ª—å—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å": ["–ö—Ä–µ–º–µ–Ω–µ—Ü—å–∫–∏–π", "–¢–µ—Ä–Ω–æ–ø—ñ–ª—å—Å—å–∫–∏–π", "–ß–æ—Ä—Ç–∫—ñ–≤—Å—å–∫–∏–π"],
        "–•–∞—Ä–∫—ñ–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å": ["–ë–æ–≥–æ–¥—É—Ö—ñ–≤—Å—å–∫–∏–π", "–Ü–∑—é–º—Å—å–∫–∏–π", "–ö—Ä–∞—Å–Ω–æ–≥—Ä–∞–¥—Å—å–∫–∏–π", "–ö—É–ø'—è–Ω—Å—å–∫–∏–π", "–õ–æ–∑—ñ–≤—Å—å–∫–∏–π", "–•–∞—Ä–∫—ñ–≤—Å—å–∫–∏–π", "–ß—É–≥—É—ó–≤—Å—å–∫–∏–π"],
        "–•–µ—Ä—Å–æ–Ω—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å": ["–ë–µ—Ä–∏—Å–ª–∞–≤—Å—å–∫–∏–π", "–ì–µ–Ω—ñ—á–µ—Å—å–∫–∏–π", "–ö–∞—Ö–æ–≤—Å—å–∫–∏–π", "–°–∫–∞–¥–æ–≤—Å—å–∫–∏–π", "–•–µ—Ä—Å–æ–Ω—Å—å–∫–∏–π"],
        "–•–º–µ–ª—å–Ω–∏—Ü—å–∫–∞ –æ–±–ª–∞—Å—Ç—å": ["–ö–∞–º'—è–Ω–µ—Ü—å-–ü–æ–¥—ñ–ª—å—Å—å–∫–∏–π", "–•–º–µ–ª—å–Ω–∏—Ü—å–∫–∏–π", "–®–µ–ø–µ—Ç—ñ–≤—Å—å–∫–∏–π"],
        "–ß–µ—Ä–∫–∞—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å": ["–ó–≤–µ–Ω–∏–≥–æ—Ä–æ–¥—Å—å–∫–∏–π", "–ó–æ–ª–æ—Ç–æ–Ω—ñ—Å—å–∫–∏–π", "–£–º–∞–Ω—Å—å–∫–∏–π", "–ß–µ—Ä–∫–∞—Å—å–∫–∏–π"],
        "–ß–µ—Ä–Ω—ñ–≤–µ—Ü—å–∫–∞ –æ–±–ª–∞—Å—Ç—å": ["–í–∏–∂–Ω–∏—Ü—å–∫–∏–π", "–î–Ω—ñ—Å—Ç—Ä–æ–≤—Å—å–∫–∏–π", "–ß–µ—Ä–Ω—ñ–≤–µ—Ü—å–∫–∏–π"],
        "–ß–µ—Ä–Ω—ñ–≥—ñ–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å": ["–ö–æ—Ä—é–∫—ñ–≤—Å—å–∫–∏–π", "–ù—ñ–∂–∏–Ω—Å—å–∫–∏–π", "–ù–æ–≤–≥–æ—Ä–æ–¥-–°—ñ–≤–µ—Ä—Å—å–∫–∏–π", "–ü—Ä–∏–ª—É—Ü—å–∫–∏–π", "–ß–µ—Ä–Ω—ñ–≥—ñ–≤—Å—å–∫–∏–π"],
        "–º. –ö–∏—ó–≤": ["–º. –ö–∏—ó–≤"],
    };

    // --- –ü–ï–†–ï–ú–ò–ö–ê–ù–ù–Ø –¢–ï–ú–ò ---
    const themeToggle = document.getElementById('theme-toggle');
    themeToggle.addEventListener('change', function() {
        if(this.checked) {
            document.body.classList.add('light-theme');
        } else {
            document.body.classList.remove('light-theme');
        }
    });

    // --- –ü–†–û–ì–†–ï–° –ë–ê–† ---
    function updateProgress() {
        const fields = [
            document.getElementById('manager').value !== "",
            addedItems.length > 0,
            document.getElementById('recipient-company').value !== "",
            document.getElementById('amount').value !== "",
            document.getElementById('delivery-oblast').value !== "",
            document.getElementById('phone').value !== ""
        ];
        
        const filled = fields.filter(Boolean).length;
        const total = fields.length;
        const percent = (filled / total) * 100;
        
        document.getElementById('progress-bar').style.width = percent + '%';
        
        if(percent === 100) {
            document.getElementById('progress-bar').style.backgroundColor = 'var(--success)';
        } else {
            document.getElementById('progress-bar').style.backgroundColor = 'var(--accent)';
        }
    }

    // --- TELEGRAM SHARE ---
    function shareTelegram() {
        const text = document.getElementById('final-text').textContent;
        if (!text) {
            showStatus("–°–ø–æ—á–∞—Ç–∫—É —Å—Ñ–æ—Ä–º—É–π—Ç–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è!", true);
            return;
        }
        const encodedText = encodeURIComponent(text);
        window.location.href = `tg://msg?text=`;
    }

    function showStatus(message, isError = false) {
        const bgColor = isError ? '#ff6666' : 'var(--accent)'; 
        const textColor = isError ? 'var(--text-main)' : '#1c1c1e'; 
        
        statusMessageEl.textContent = message;
        statusMessageEl.style.backgroundColor = bgColor; 
        statusMessageEl.style.color = textColor;
        statusMessageEl.style.display = 'block';

        setTimeout(() => {
            statusMessageEl.style.display = 'none';
        }, 3000);
    }

    function populateOblasts() {
        const oblastSelect = document.getElementById('delivery-oblast');
        if (oblastSelect.options.length > 1) return;
        const sortedOblasts = Object.keys(ukrRegions).sort();
        sortedOblasts.forEach(oblast => {
            const option = document.createElement('option');
            option.value = oblast;
            option.textContent = oblast;
            oblastSelect.appendChild(option);
        });
    }

    function populateRaions() {
        const oblastSelect = document.getElementById('delivery-oblast');
        const raionSelect = document.getElementById('delivery-raion');
        const selectedOblast = oblastSelect.value;

        raionSelect.innerHTML = '<option value="" disabled selected>–û–±–µ—Ä—ñ—Ç—å —Ä–∞–π–æ–Ω</option>';
        raionSelect.disabled = true;

        if (selectedOblast && ukrRegions[selectedOblast]) {
            const raions = ukrRegions[selectedOblast].sort();
            raions.forEach(raion => {
                const option = document.createElement('option');
                option.value = raion;
                option.textContent = raion;
                raionSelect.appendChild(option);
            });
            raionSelect.disabled = false;
        }
        
        if (selectedOblast === "–º. –ö–∏—ó–≤") {
            raionSelect.innerHTML = '<option value="–º. –ö–∏—ó–≤" selected>–º. –ö–∏—ó–≤</option>';
            raionSelect.disabled = true;
        }
    }

    function addItem() {
        const select = document.getElementById('product-select');
        const itemCommentEl = document.getElementById('item-comment');
        
        const itemText = select.value;
        const itemComment = itemCommentEl.value.trim();

        if (itemText === "") {
            showStatus("–ë—É–¥—å –ª–∞—Å–∫–∞, –æ–±–µ—Ä—ñ—Ç—å –ø–æ–∑–∏—Ü—ñ—é –∑—ñ —Å–ø–∏—Å–∫—É.", true);
            return;
        }

        addedItems.push({ name: itemText, comment: itemComment });
        
        renderList();
        updateProgress();
        select.value = "";
        itemCommentEl.value = "";
        showStatus(`–î–æ–¥–∞–Ω–æ –ø–æ–∑–∏—Ü—ñ—é`);
    }

    function renderList() {
        const listEl = document.getElementById('added-products-list');
        listEl.innerHTML = "";

        addedItems.forEach((item, index) => {
            const li = document.createElement('li');
            const commentIndicator = item.comment ? 
                `<span class="text-xs ml-2" style="color: var(--accent)" title="">(i)</span>` : '';
            
            li.innerHTML = `
                <span class="truncate pr-4 flex items-center"> </span>
                <button class="remove-item" onclick="removeItem()">&times;</button>
            `;
            listEl.appendChild(li);
        });
    }

    function removeItem(index) {
        addedItems.splice(index, 1);
        renderList();
        updateProgress();
        showStatus(`–í–∏–¥–∞–ª–µ–Ω–æ –ø–æ–∑–∏—Ü—ñ—é`);
    }

    function formatNumberWithApostrophe(numberString) {
        if (!numberString) return '';
        const cleaned = numberString.toString().replace(/\D/g, ''); 
        if (!cleaned) return '';
        return cleaned.replace(/\B(?=(\d{3})+(?!\d))/g, "'");
    }
    
    // --- FIREWORKS ---
    function startFireworks() {
        const canvas = document.getElementById('fireworks-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const particles = [];
        const colors = ['#FFC107', '#FF453A', '#32D74B', '#0A84FF', '#FF9F0A', '#BF5AF2', '#64D2FF'];

        function createParticle(x, y) {
            const particleCount = 40;
            for (let i = 0; i < particleCount; i++) {
                particles.push({
                    x: x,
                    y: y,
                    radius: Math.random() * 3 + 1,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    velocity: {
                        x: (Math.random() - 0.5) * 8,
                        y: (Math.random() - 0.5) * 8
                    },
                    alpha: 1,
                    life: Math.random() * 50 + 50
                });
            }
        }

        function animate() {
            requestAnimationFrame(animate);
            ctx.fillStyle = 'rgba(28, 28, 30, 0.2)'; 
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            particles.forEach((particle, index) => {
                if (particle.alpha > 0) {
                    ctx.beginPath();
                    ctx.arc(particle.x, particle.y, particle.radius, 0, Math.PI * 2);
                    ctx.fillStyle = particle.color;
                    ctx.globalAlpha = particle.alpha;
                    ctx.fill();
                    ctx.globalAlpha = 1.0;

                    particle.x += particle.velocity.x;
                    particle.y += particle.velocity.y;
                    particle.velocity.y += 0.05; 
                    particle.alpha -= 0.01;
                    particle.life--;
                } else {
                    particles.splice(index, 1);
                }
            });
        }

        animate();

        fireworksInterval = setInterval(() => {
            const x = Math.random() * canvas.width;
            const y = Math.random() * (canvas.height / 2);
            createParticle(x, y);
        }, 500);
        
        createParticle(canvas.width / 2, canvas.height / 3);
    }

    function stopFireworks() {
        clearInterval(fireworksInterval);
    }

    function animateAndShowSuccess(amount) {
        const overlay = document.getElementById('celebration-overlay');
        const textDisplay = document.getElementById('celebration-text');
        
        let displayAmount = amount ? amount : "0";
        textDisplay.innerHTML = ` <br>–°—É–º–∞ –≤ –ø–ª–∞–Ω!<br>–í–Ü–¢–ê–Æ!`;

        overlay.classList.add('visible');
        startFireworks();
        
        setTimeout(() => {
            overlay.classList.remove('visible');
            stopFireworks();
        }, 3500);
    }

    function generateOrder() {
        const manager = document.getElementById('manager').value;
        const isPreorder = document.getElementById('is-preorder').checked;

        const oblast = document.getElementById('delivery-oblast').value;
        const raion = document.getElementById('delivery-raion').value;
        const village = document.getElementById('delivery-village').value.trim();
        const recipientCompany = document.getElementById('recipient-company').value.trim();
        
        const rawAmount = document.getElementById('amount').value.trim();
        const formattedAmount = formatNumberWithApostrophe(rawAmount);
        lastFormattedAmount = formattedAmount; 
        
        const vat = document.querySelector('input[name="vat"]:checked').value;
        const prepaymentDetailsRaw = document.getElementById('prepayment-details').value.trim().replace(/[()]/g, '');
        const rawDeliveryCost = document.getElementById('delivery-cost').value.trim();
        const formattedDeliveryCost = formatNumberWithApostrophe(rawDeliveryCost);
        const isDeliveryIncluded = document.getElementById('delivery-included').checked;
        const contactName = document.getElementById('contact-name').value.trim();
        const phone = document.getElementById('phone').value.trim();
        const tractor = document.getElementById('tractor').value.trim();
        const info = document.getElementById('additional-info').value.trim();

        const preorderPrefix = isPreorder ? "‚ùóÔ∏è–ü–µ—Ä–µ–¥–∑–∞–º–æ–≤–ª–µ–Ω–Ω—è‚ùóÔ∏è\n" : "";
        
        let addressLines = [];
        if (oblast) {
            addressLines.push(oblast);
            if (raion && raion !== oblast) { 
                raionClean = raion.replace(/ —Ä–∞–π–æ–Ω/i, '').trim(); 
                addressLines.push(raionClean);
            } else if (raion === oblast && raion === '–º. –ö–∏—ó–≤') {
                addressLines.push('');
            }
            if (village) {
                addressLines.push(village);
            }
        } else {
            addressLines.push("‚ö†Ô∏è –ê–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –Ω–µ –≤–∫–∞–∑–∞–Ω–∞");
        }
        const addressString = addressLines.join('\n');

        let productsString = "";
        if (addedItems.length > 0) {
            productsString = addedItems.map((item, index) => {
                let itemLine = `. `;
                if (item.comment) {
                    itemLine += `\n     -`; 
                }
                return itemLine;
            }).join('\n');
        } else {
            productsString = "‚ö†Ô∏è –¢–æ–≤–∞—Ä–∏ –Ω–µ –¥–æ–¥–∞–Ω–æ";
        }
        
        let paymentLine = ` –≥—Ä–Ω. `;
        if (prepaymentDetailsRaw) {
            paymentLine += ` ()`;
        }
        
        let deliveryLine = "";
        if (formattedDeliveryCost) {
            deliveryLine = `( –¥–æ—Å—Ç–∞–≤–∫–∞)`;
            if (isDeliveryIncluded) {
                deliveryLine += " - –≤—Ä–∞—Ö–æ–≤–∞–Ω–∞";
            } else {
                deliveryLine += " - –æ–ø–ª–∞—Ç–∞ –ø—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ";
            }
        } else if (isDeliveryIncluded) {
            deliveryLine = "(–î–æ—Å—Ç–∞–≤–∫–∞ –≤–∫–ª—é—á–µ–Ω–∞)";
        }

        const managerInGenitive = "–ú–µ–Ω–µ–¥–∂–µ—Ä–∞ " + manager; 

        const finalText = `–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è - :















–î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è:
`;

        const resultArea = document.getElementById('result-area');
        const finalTextDiv = document.getElementById('final-text');
        
        finalTextDiv.textContent = finalText;
        resultArea.style.display = 'block';
        resultArea.scrollIntoView({behavior: "smooth"});
        updateProgress();
        showStatus('–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è —Å—Ñ–æ—Ä–º–æ–≤–∞–Ω–æ!');
    }
    
    function copyText() {
        const text = document.getElementById('final-text').textContent;
        if (navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard.writeText(text).then(() => {
                animateAndShowSuccess(lastFormattedAmount);
            }).catch(err => {
                copyFallback(text);
            });
        } else {
            copyFallback(text);
        }
    }

    function copyFallback(text) {
        const textarea = document.createElement('textarea');
        textarea.value = text;
        textarea.style.position = 'fixed';
        textarea.style.left = '-9999px';
        document.body.appendChild(textarea);
        textarea.focus();
        textarea.select();
        try {
            const successful = document.execCommand('copy');
            if (successful) {
                animateAndShowSuccess(lastFormattedAmount);
            } else {
                showStatus('–ù–µ –≤–¥–∞–ª–æ—Å—è —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ —Ç–µ–∫—Å—Ç.', true);
            }
        } catch (err) {
            showStatus('–ù–µ –≤–¥–∞–ª–æ—Å—è —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ —Ç–µ–∫—Å—Ç.', true);
        }
        document.body.removeChild(textarea);
    }
    
    window.onload = function() {
        populateOblasts();
        updateProgress();
    };

</script>

</body>
</html>



